{
  "file_name": "FloorIsLava.verse",
  "questions": [
    "How do I create a 'Floor is Lava' mechanic where the water level rises and falls?",
    "What is the Verse code for an ability that moves a water device to flood an area temporarily?",
    "How can I make a rising water effect that damages players, but the player who activated it is immune?"
  ],
  "explanation": "This script defines a 'FloorIsLava' device that allows a player of a specific class to trigger a rising and falling water effect that can damage other players.\n\n- **Class System:** It uses a 'tracker_device' to verify a player's 'Class' before granting them the activation item.\n- **Activation:** Players use an item linked to a 'signal_remote_manager_device' to trigger the 'FloodWater' function.\n- **Core Logic:** When activated, the script teleports a 'water_device' to a starting position and uses `.MoveTo()` to raise its height over a set duration (`TimeRise`). After waiting for `TimeStill` seconds, it moves the water back down. The activator of the ability is temporarily immune to the water's damage effect, while all other players will take damage if 'WaterDoesDamage' is enabled.",
  "code": "using { /Fortnite.com/Devices }\nusing { /Verse.org/Simulation }\nusing { /UnrealEngine.com/Temporary/Diagnostics }\nusing { /UnrealEngine.com/Temporary/SpatialMath }\nusing { /Fortnite.com/Characters }\n\nFloorIsLava := class(creative_device):\n    @editable var Class : int = 0\n    @editable ClassTracker : tracker_device = tracker_device{}\n\n    @editable WaterDevice : water_device = water_device{}\n    @editable RemoteControl : signal_remote_manager_device = signal_remote_manager_device{}\n    @editable ItemGranter : item_granter_device = item_granter_device{}\n\n    @editable Superpowerused : accolades_device = accolades_device{}\n\n    @editable WaterMaxHeight : float = 0.0\n    @editable WaterCoordinateX : float = 0.0\n    @editable WaterCoordinateY : float = 0.0\n    @editable WaterCoordinateZ : float = 0.0\n\n    @editable WaterIncreasesYourDamage : float = 0.0\n\n    @editable TimeStill : float = 0.0\n    @editable TimeRise : float = 0.0\n    @editable Cooldown : float = 0.0\n\n    @editable WaterDoesDamage : logic = false\n    @editable WaterDamageAmount : float = 0.0\n\n    var HasPowers : logic = false\n    var PlayerAgent : []agent = array{} \n\n    OnBegin<override>()<suspends>:void=\n        WaterDevice.AgentEntersWaterEvent.Subscribe(WaterEnterSleep)\n        RemoteControl.PrimarySignalEvent.Subscribe(FloodWatercall)\n        set PlayerAgent = array{}\n        InitSpawners()\n\n    InitSpawners() : void=\n        # Print(\"InitSpawners\")\n            Spawners := FindCreativeObjectsWithTag(spawner{})\n            for (Obj : Spawners):\n                if (Spawner := player_spawner_device[Obj]):\n                    Spawner.SpawnedEvent.Subscribe(OnPlayerSpawned)\n            \n    OnPlayerSpawned(Agent : agent): void=\n        #Print(\"OnPlayerSpawnedfunction\")\n        if (Player := player[Agent]):\n            spawn{OnPlayerSpawnedSleep(Player)}\n\n    OnPlayerSpawnedSleep(Player : player)<suspends>:void=\n        Sleep(1.0)\n        if(ClassTracker.GetValue(Player) = Class):\n            ItemGranter.GrantItem(Player)\n\n\n    FloodWatercall(Agent : agent): void=\n        spawn{FloodWater(Agent)}\n\n    FloodWater(Agent:agent)<suspends> : void=\n        Superpowerused.Award(Agent)\n        Sleep(1.0)\n        if(ClassTracker.GetValue(Agent) = Class):\n            set PlayerAgent = array{}\n            set PlayerAgent += array{Agent}\n\n            WaterMaxPosition := vector3{X:=WaterCoordinateX,Y:=WaterCoordinateY,Z:=WaterMaxHeight}\n            if(WaterDevice.TeleportTo[vector3{X:=WaterCoordinateX,Y:=WaterCoordinateY,Z:=WaterCoordinateZ} , WaterDevice.GetTransform().Rotation]){}\n\n            WaterDevice.MoveTo(WaterMaxPosition , WaterDevice.GetTransform().Rotation , TimeRise)\n            Sleep(TimeStill)\n            WaterDevice.MoveTo(vector3{X:=WaterCoordinateX,Y:=WaterCoordinateY,Z:=WaterCoordinateZ} , WaterDevice.GetTransform().Rotation , TimeRise)\n\n            if(WaterDevice.TeleportTo[vector3{X:=10000.0,Y:=10000.0,Z:=-10000.0} , WaterDevice.GetTransform().Rotation]){}\n\n    WaterEnterSleep(Agent:agent) : void=\n        spawn:\n            WaterEnter(Agent)\n            \n    WaterEnter(Agent:agent)<suspends> : void=\n        if(Player := player[Agent],FC := Player.GetFortCharacter[]):\n            loop:\n                Sleep(1.0)\n                if(FC.IsInWater[]):\n                    if(Agent = PlayerAgent[0]):\n                        if(HasPowers = false):\n                            set HasPowers = true\n                            spawn:\n                                ResetHasPowers()\n                    else:\n                        if(WaterDoesDamage = true):\n                            FC.Damage(WaterDamageAmount)\n    ResetHasPowers()<suspends> : void=\n        Sleep(5.0)\n        set HasPowers = false",
  "external_calls": [
    "tags.verse"
  ]
}
