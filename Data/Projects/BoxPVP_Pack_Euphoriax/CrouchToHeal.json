{
  "file_name": "CrouchToHeal.verse",
  "questions": [
    "How can I make a script that heals a player when they crouch?",
    "What is the Verse code for a class-specific ability that triggers on crouching?",
    "How do I subscribe to the CrouchedEvent for a player character?"
  ],
  "explanation": "This script defines a 'CrouchToHeal' device that grants a healing ability to players of a specific class. When a player belonging to the correct class crouches, they are healed for a configurable amount.\n\n- **Class System:** It uses a 'tracker_device' to verify a player's 'Class' before the healing effect can be triggered.\n- **Activation:** The ability is passive. The script subscribes to the 'CrouchedEvent' for every player in the game.\n- **Core Logic:** The 'OnCrouch' function is the event handler. When a player crouches, this function checks if they are the correct class. If they are, it calls the `.Heal()` method on their 'fort_character' and awards them XP via an 'accolades_device'.",
  "code": "using { /Fortnite.com/Devices }\nusing { /Verse.org/Simulation }\nusing { /UnrealEngine.com/Temporary/Diagnostics }\nusing { /Fortnite.com/Characters }\nusing { /UnrealEngine.com/Temporary/SpatialMath }\n\nCrouchToHeal := class(creative_device):\n    @editable var Class : int = 0\n    @editable ClassTracker : tracker_device = tracker_device{}\n    @editable HUDablity : hud_message_device = hud_message_device{}\n\n    @editable Superpowerused : accolades_device = accolades_device{}\n\n\n    @editable AmountToHeal : float = 0.0\n\n    OnBegin<override>()<suspends>:void=\n        InitSpawners()\n        Sleep(3.0)\n        for (Player : GetPlayspace().GetPlayers()):\n            if(FC := Player.GetFortCharacter[], Agent := FC.GetAgent[]):\n                spawn:\n                    CrouchToHealPlayer(Agent)\n                            \n    InitSpawners() : void=\n        Spawners := FindCreativeObjectsWithTag(spawner{})\n        for (Obj : Spawners):\n            if (Spawner := player_spawner_device[Obj]):\n                Spawner.SpawnedEvent.Subscribe(OnPlayerSpawned)\n\n    OnPlayerSpawned(Agent : agent): void=\n        if (Player := player[Agent]):\n            spawn{GiveItem(Agent)}\n\n    GiveItem(Agent : agent)<suspends>:void=\n        Sleep(1.0)\n        if(ClassTracker.GetValue(Agent) = Class):\n            HUDablity.Show(Agent)\n\n    CrouchToHealPlayer(Agent:agent) <suspends>: void=\n        if(Player := player[Agent] , FC:= Player.GetFortCharacter[]):\n            FC.CrouchedEvent().Subscribe(OnCrouch)\n\n    OnCrouch(FC : fort_character, IsCrouched : logic) : void=\n        if(Agent := FC.GetAgent[]):\n            if(ClassTracker.GetValue(Agent) = Class):\n                if(IsCrouched?):\n                    # PlayerPos := FC.GetTransform().Translation\n\n                    # HealthAmount := FC.GetHealth()\n                    Superpowerused.Award(Agent)\n                    FC.Heal(AmountToHeal)",
  "external_calls": [
    "tags.verse"
  ]
}
